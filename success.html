<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>預約成功</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="card-box">
  <h2 class="mb-3">✅ 預約成功！</h2>
  <p>您的預約資訊：</p>
  <p id="info" class="fw-bold"></p>
  <p>請在預約的門診時間內到場報到，逾期自動取消。</p>
  <div class="mt-4">
    <a href="index.html" class="btn-main w-100 mb-3">返回預約首頁</a>
    <a href="query.html" class="btn-secondary w-100">查詢/取消預約</a>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
// GAS url
const API="https://script.google.com/macros/s/AKfycbwRDBlWCPghoQqBKApj2kwtE0hy2el75PiFHEJn1RAL4ewUT7GnFBLfK_aopyLnVye2/exec";

(async()=>{
  const id=new URLSearchParams(location.search).get('id');
  try{
    const r=await axios.get(API,{params:{action:'detail',id:id}});
    const o=r.data;
    function getWeek(d){ const w=['日','一','二','三','四','五','六']; return '星期'+w[new Date(d).getDay()]; }
    document.getElementById('info').innerHTML=`${o.date} ${getWeek(o.date)}（${o.slot}）　姓名：${o.name}，號碼：${o.num} 號`;
  }catch(e){
    alert("無法取得預約資料");
  }
})();
</script>
</body>
</html>

