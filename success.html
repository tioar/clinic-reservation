<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>é ç´„æˆåŠŸ</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<style>
body{background:#eaf2f8}
.card{max-width:680px;margin:60px auto;padding:28px;border:0;border-radius:18px;box-shadow:0 10px 28px rgba(47,79,114,.12)}
.icon{font-size:56px;line-height:1}
h1{font-weight:800;margin:10px 0 16px}
.info{font-size:20px;line-height:1.7}
.btn-main{background:#3b7096;border:0;color:#fff;padding:10px 20px;border-radius:12px}
</style>
</head>
<body>
<div class="card text-center">
  <div class="icon">âœ…</div>
  <h1>é ç´„æˆåŠŸï¼</h1>
  <p class="text-muted">æ‚¨çš„é ç´„è³‡è¨Šï¼š</p>

  <div id="detail" class="info mb-3">è®€å–ä¸­â€¦</div>

  <div class="d-flex justify-content-center gap-3">
    <a href="index.html" class="btn btn-main">è¿”å›é ç´„é¦–é </a>
    <a href="query.html" class="btn btn-outline-secondary">æŸ¥è©¢/å–æ¶ˆé ç´„</a>
  </div>

  <div class="mt-3 text-secondary">
    ğŸ“… è«‹åœ¨é ç´„çš„é–€è¨ºæ™‚é–“å…§åˆ°å ´å ±åˆ°ï¼Œé€¾æœŸè‡ªå‹•å–æ¶ˆã€‚
  </div>
</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbxIAVoc2Rwdtpm9dYecLQ5fLQb64yjk12D1IIId1_TwN2ptzh6is23mTMjye0VJI71p/exec";

function qs(k){return new URL(location.href).searchParams.get(k)}
function weekdayStr(d){
  const w = ['æ—¥','ä¸€','äºŒ','ä¸‰','å››','äº”','å…­'];
  return 'æ˜ŸæœŸ'+w[new Date(d+'T00:00:00').getDay()];
}

(async ()=>{
  const id = qs('id');
  if(!id){ document.getElementById('detail').innerText='ç¼ºå°‘åƒæ•¸'; return; }

  try{
    const r = await axios.get(API,{params:{action:'detail', id}});
    if(r.data.error){ document.getElementById('detail').innerText=r.data.error; return; }
    const d = r.data;
    const wk = weekdayStr(d.date);
    // d.slot ä¾‹ï¼šæ—©è¨ºï¼›ä½ è‹¥è¦é¡¯ç¤ºæ™‚æ®µï¼Œå¯åœ¨ index.html çš„ option data-time å¸¶å…¥å¾Œå¯«åˆ°è¡¨ï¼›é€™è£¡å…ˆä¸é¡¯ç¤º time
    document.getElementById('detail').innerHTML =
      `<div>${d.date} ${wk}ï¼ˆ${d.slot}ï¼‰</div>
       <div class="text-muted">${d.submittedAt}</div>
       <div class="mt-2">å§“åï¼š<b>${d.name}</b>ï¼Œè™Ÿç¢¼ï¼š<b>${d.num}</b> è™Ÿã€‚</div>`;
  }catch(e){
    console.error(e);
    document.getElementById('detail').innerText='ç„¡æ³•å–å¾—é ç´„è³‡æ–™';
  }
})();
</script>
</body>
</html>
