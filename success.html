<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>é ç´„æˆåŠŸ</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="style.css">
<style>
body{background:#e8f0f6;}
.card-box{max-width:500px;margin:60px auto;padding:40px;border-radius:22px;background:#fff;box-shadow:0 10px 20px rgba(0,0,0,.12);text-align:center;}
.btn-main{background:#3f729b;color:#fff;border:0;border-radius:12px;padding:12px 30px;font-size:18px;}
.btn-secondary{border:2px solid #3f729b;border-radius:12px;padding:12px 30px;font-size:18px;color:#3f729b;background:#fff;}
</style>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
<div class="card-box">
  <h2 class="mb-3">âœ… é ç´„æˆåŠŸï¼</h2>
  <p>æ‚¨çš„é ç´„è³‡è¨Šï¼š</p>
  <p id="info" class="fw-bold"></p>
  <p id="info2" class="fw-bold"></p>
  <p>è«‹åœ¨é ç´„çš„é–€è¨ºæ™‚é–“å…§åˆ°å ´å ±åˆ°ï¼Œé€¾æœŸè‡ªå‹•å–æ¶ˆã€‚</p>
  <div class="mt-4 mb-3">
    <a href="index.html" class="btn-main w-100 mb-3">è¿”å›é ç´„é¦–é </a>
    <a href="query.html" class="btn-secondary w-100">æŸ¥è©¢/å–æ¶ˆé ç´„</a>
  </div>
  <div>
    <a href="#" id="shareLink">ğŸ“© åˆ†äº«</a>
  </div>
</div>

<script>
const API="https://script.google.com/macros/s/AKfycbwU6EKpfC--HWONlEpB3bYCOV9tzrFihbPhVgYRsghCr39pbHe6VaCBK1rt6SEGtpN4/exec";
const q=new URLSearchParams(location.search);
const rowId=q.get("id");

(async ()=>{
  try{
    const r=await axios.get(API,{params:{action:'detail',id:rowId}});
    const d=r.data;
    function getW(date){
      const w=['æ—¥','ä¸€','äºŒ','ä¸‰','å››','äº”','å…­'];
      return w[new Date(date).getDay()];
    }
    document.getElementById("info").innerText=`${d.date} æ˜ŸæœŸ${getW(d.date)}ï¼ˆ${d.slot}ï¼‰`;
    document.getElementById("info2").innerText=`å§“åï¼š${d.name}ï¼Œè™Ÿç¢¼ï¼š${d.num} è™Ÿã€‚`;

    const txt=`é™³è¬é¾è¨ºæ‰€é–€è¨ºé ç´„æˆåŠŸï¼
å·²é ç´„ï¼š${d.date} æ˜ŸæœŸ${getW(d.date)}ï¼ˆ${d.slot}ï¼‰
å§“åï¼š${d.name}ï¼Œè™Ÿç¢¼ï¼š${d.num} è™Ÿã€‚
è«‹åœ¨é ç´„çš„é–€è¨ºæ™‚é–“å…§åˆ°å ´å ±åˆ°ï¼Œé€¾æœŸè‡ªå‹•å–æ¶ˆã€‚`;
    
    document.getElementById("shareLink").onclick=async(e)=>{
      e.preventDefault();
      if(navigator.share){
        await navigator.share({text:txt});
      }else{
        await navigator.clipboard.writeText(txt);
        alert("å·²è¤‡è£½ï¼Œå¯ä»¥è²¼åˆ° LINE / Messenger");
      }
    };
  }catch(e){
    console.error(e);
    alert("ç„¡æ³•å–å¾—é ç´„è³‡æ–™");
  }
})();
</script>
</body>
</html>
