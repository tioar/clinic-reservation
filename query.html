<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>查詢／取消預約</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
<div class="card" style="max-width:560px;margin:40px auto;">
  <div class="header">
    <div class="logo">＋</div>
    <h1>查詢／取消預約</h1>
  </div>

  <div class="mb-3">
    <label class="form-label">預約 ID（成功頁網址中的 id）</label>
    <input type="number" id="rid" class="form-control" placeholder="例如：5">
  </div>

  <div class="d-grid gap-2">
    <button id="btnQuery" class="btn-main">查詢</button>
    <a href="index.html" class="btn btn-outline-secondary">返回首頁</a>
  </div>

  <hr class="my-4">

  <div id="result" style="display:none;">
    <h5 class="mb-3">預約資料</h5>
    <div id="detail"></div>
    <!-- 取消功能預留位（等你之後提供 GAS cancel 再接） -->
    <!-- <button id="btnCancel" class="btn btn-danger mt-3">取消預約</button> -->
  </div>
</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbyO-CCSC7NAUfF10O34J4pd-Bn3YL7QgyCUNxgKfg-UWzQ7U_ajiI0jayCvHxD3NSKQ/exec";

btnQuery.onclick = async ()=>{
  const id = rid.value.trim();
  if(!id) return alert('請輸入預約 ID');
  try{
    const r = await axios.get(API,{params:{action:'detail',id}});
    const d=r.data;
    if(!d || !d.date){ alert('查無資料'); return; }
    result.style.display='block';
    detail.innerHTML = `
      <div class="mb-2"><b>預約日期：</b>${d.date}</div>
      <div class="mb-2"><b>診別：</b>${d.slot}</div>
      <div class="mb-2"><b>姓名：</b>${d.name}</div>
      <div class="mb-2"><b>號碼：</b>${d.num}</div>
      <div class="mb-2"><b>時段：</b>${d.time||''}</div>
      <div class="text-muted">（若需取消，請先來信或來電；待後端開放「取消」API 再於此頁完成線上取消）</div>
    `;
  }catch(e){
    console.error(e);
    alert('查詢失敗，請稍後再試');
  }
};
</script>
</body>
</html>




